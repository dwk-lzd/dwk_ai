<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS 请求</title>

</head>
<ul id="repos"></ul>

<body>
    <script>
        // 阻塞 <ul id="repos"></ul> 都没有加载完成，获取不到
        // window.onload 有点晚
        document.addEventListener('DOMContentLoaded', async () => {
            // console.log(document.getElementById('repos'));
            // fetch('https://api.github.com/users/shunwuyu')
            // .then(res => res.json())
            // .then(data => {
            //     document.getElementById('repos').innerHTML = data.map(item => `<li>${item.name}</li>`).join('')
            // })

            // 感觉写同步代码一样
            // es6 async await
            // await 内部是 promise实例
            // new Promise 可以看到打印结果 Promise {} 所以我们可以.then拿到数据
            // 所以fetch本质是 返回promise 实例

            // pending 状态 等待 
            console.log(fetch('https://api.github.com/users/shunwuyu/repos'));
            // resolve() fullfilled 完成了 
            // reject() rejected 失败了
            const result = await fetch('https://api.github.com/users/shunwuyu/repos')
            const data = await result.json()
            console.log(data);
            document.getElementById('repos').innerHTML = data.map(item => `<li>${item.name}</li>`).join('')
        })

        // api 接口地址
        // www.bilibili.com 网站地址，用户访问的
        // https://api.github.com/users/shunwuyu
        // node java go 写的服务端程序，提供数据

        // - JSON格式 数据返回
        // - 对应的资源
        //  前端，通过js fetch 主动拉取资源
        // 前端自己做主
        // web 2.0时代 动态页面
    </script>
</body>

</html>